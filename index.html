<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saúde Angola — Medicamentos</title>
<meta name="description" content="Saúde Angola: medicamentos, preços e farmácias.">

<style>
:root{
  --bg:#eaf4f9;
  --primary:#00bcd4;
  --accent:#00796b;
  --text:#333;
  --radius:12px;
  --shadow:0 6px 20px rgba(0,0,0,0.15);
  --card-bg:white;
}

*{ box-sizing:border-box; }
body{ margin:0; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:var(--bg); color:var(--text); }

/* HEADER */
header{
  background: linear-gradient(90deg, #00bcd4, #00796b);
  color:white;
  padding:12px 20px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:sticky;
  top:0;
  z-index:100;
  box-shadow:0 4px 12px rgba(0,0,0,0.25);
}
header:hover{
  background: linear-gradient(90deg, #0097a7, #004d40);
}
header img.logo{
  height:60px;
  width:auto;
  background:transparent;
  filter: drop-shadow(2px 2px 6px rgba(0,0,0,0.6));
  transition: transform 0.3s;
}
header img.logo:hover{
  transform: scale(1.05);
}
header h1{
  margin:0;
  font-size:2rem;
  font-weight:700;
  text-shadow:1px 1px 3px rgba(0,0,0,0.4);
}

main{ padding:20px; max-width:1200px; margin:auto; }

.search-container{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-bottom:5px;
  position:relative;
}
.search-container input{
  flex:1;
  padding:12px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:1rem;
  transition:0.3s;
}
.search-container input:focus{
  border-color:var(--primary);
  box-shadow:0 0 8px rgba(0,188,212,0.3);
  outline:none;
}
.search-container button{
  padding:12px 18px;
  border:none;
  border-radius:8px;
  background:var(--accent);
  color:white;
  font-weight:700;
  cursor:pointer;
  transition:0.3s;
}
.search-container button:hover{
  background:#004d40;
}

/* Sugestões */
#suggestions{
  position:absolute;
  top:100%;
  left:0;
  right:0;
  background:white;
  border:1px solid #ccc;
  border-radius:8px;
  max-height:200px;
  overflow-y:auto;
  z-index:99;
}
#suggestions div{
  padding:8px 12px;
  cursor:pointer;
}
#suggestions div:hover{
  background:var(--bg);
}

/* CARDS */
.medicamentos{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:25px;
}
.card{
  background:var(--card-bg);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
  transition: all 0.3s ease, transform 0.3s;
  cursor:pointer;
  opacity:1;
  transform: translateY(0);
}
.card img{
  width:100%;
  height:160px;
  object-fit:cover;
  border-radius: var(--radius) var(--radius) 0 0;
}
.card-body{
  padding:16px;
}
.card-body h3{
  margin:0 0 8px;
  color:var(--primary);
}
.card-body p{
  margin:4px 0;
  font-size:0.95rem;
}

/* MODAL */
.modal{
  display:none;
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.7);
  justify-content:center; align-items:center;
  z-index:1000;
  padding:10px;
}
.modal-content{
  background:white;
  border-radius:var(--radius);
  padding:25px 20px;
  width:100%;
  max-width:600px;
  max-height:85%;
  overflow-y:auto;
  animation:fadeIn 0.3s;
  position:relative;
  box-shadow:0 10px 30px rgba(0,0,0,0.25);
}
@keyframes fadeIn{
  from{ opacity:0; transform:translateY(-20px); }
  to{ opacity:1; transform:translateY(0); }
}
.close-modal{
  position:absolute;
  top:10px;
  right:15px;
  font-size:28px;
  font-weight:bold;
  cursor:pointer;
  color:#555;
  transition:0.3s;
}
.close-modal:hover{ color:var(--accent); }
.modal-content img{
  width:180px;
  height:180px;
  object-fit:contain;
  border-radius:12px;
  display:block;
  margin:0 auto 12px auto;
  background:transparent;
}
.dosagens, .farmacias{
  margin-top:12px;
}
.dosagens h4, .farmacias h4{ margin-bottom:6px; color:var(--accent); }
.dosagens ul, .farmacias ul{ list-style:none; padding-left:0; }
.dosagens li, .farmacias li{ margin-bottom:5px; font-size:0.95rem; }

footer{
  text-align:center;
  padding:20px;
  margin-top:40px;
  font-size:0.9rem;
  color:#555;
  background:#d4f1f9;
  border-top:1px solid #b2ebf2;
}
</style>
</head>
<body>

<header>
  <img src="imagens/logo-mbb.png.png" alt="Logo" class="logo">
  <h1>Saúde Angola</h1>
</header>

<main>
  <div class="search-container">
    <input type="text" id="searchMed" placeholder="Pesquisar medicamento..." oninput="showSuggestions(this.value)">
    <button onclick="searchMed()">Pesquisar</button>
    <div id="suggestions"></div>
  </div>

  <div class="medicamentos" id="medList"></div>
</main>

<!-- MODAL -->
<div class="modal" id="medModal">
  <div class="modal-content">
    <span class="close-modal" onclick="closeModal()">&times;</span>
    <img id="modalImg" src="" alt="Medicamento">
    <h2 id="modalName"></h2>
    <p id="modalDesc"></p>
    <div class="dosagens">
      <h4>Dosagens</h4>
      <ul id="modalDosagens"></ul>
    </div>
    <div class="farmacias">
      <h4>Farmácias</h4>
      <ul id="modalFarmacias"></ul>
    </div>
  </div>
</div>

<footer>&copy; <span id="year"></span> Saúde Angola</footer>

<script>
document.getElementById('year').textContent = new Date().getFullYear();

let history = [];
let medicamentos = [
  {"nome_comercial":"Paracetamol","nome_generico":"Paracetamol","descricao":"Alívio de dores e febre","categoria":"Analgésico","imagem":"imagens/valsdm.png","dosagens":[{"quantidade":"500mg","forma":"Comprimido","preco":2.5}],"farmacias":[{"nome":"Farmácia Central","preco":2.5}]},
  {"nome_comercial":"Ibuprofeno","nome_generico":"Ibuprofeno","descricao":"Alívio de dores e inflamação","categoria":"Anti-inflamatório","imagem":"imagens/ibuprofeno.png","dosagens":[{"quantidade":"400mg","forma":"Comprimido","preco":3.0}],"farmacias":[{"nome":"Farmácia Angola","preco":3.0}]},
  {"nome_comercial":"Amoxicilina","nome_generico":"Amoxicilina","descricao":"Antibiótico para infecções","categoria":"Antibiótico","imagem":"imagens/amoxicilina.png","dosagens":[{"quantidade":"500mg","forma":"Comprimido","preco":4.0}],"farmacias":[{"nome":"Farmácia Central","preco":4.0}]},
  {"nome_comercial":"Lorazepam","nome_generico":"Lorazepam","descricao":"Trata ansiedade e insônia","categoria":"Ansiolítico","imagem":"imagens/lorazepam.png","dosagens":[{"quantidade":"2mg","forma":"Comprimido","preco":5.0}],"farmacias":[{"nome":"Farmácia Angola","preco":5.0}]},
  {"nome_comercial":"Omeprazol","nome_generico":"Omeprazol","descricao":"Reduz ácido gástrico","categoria":"Antiácido","imagem":"imagens/omeprazol.png","dosagens":[{"quantidade":"20mg","forma":"Comprimido","preco":3.5}],"farmacias":[{"nome":"Farmácia Central","preco":3.5}]}
];

// Função para exibir os cards com efeito dinâmico
function displayCards(filter='') {
  const medList = document.getElementById('medList');

  // Inicializa os cards se ainda não estiverem
  if(medList.innerHTML===''){
    medicamentos.forEach(med => {
      const card = document.createElement('div');
      card.className='card';
      card.dataset.name=med.nome_comercial.toLowerCase();
      card.dataset.category=med.categoria.toLowerCase();
      card.innerHTML=`
        <img src="${med.imagem}" alt="${med.nome_comercial}">
        <div class="card-body">
          <h3>${med.nome_comercial}</h3>
          <p>${med.nome_generico}</p>
          <p>${med.categoria}</p>
        </div>
      `;
      card.onclick=()=>openModal(med);
      medList.appendChild(card);
    });
  }

  // Aplicar filtro com animação
  const cards = medList.querySelectorAll('.card');
  const val = filter.toLowerCase();
  cards.forEach(card=>{
    if(card.dataset.name.includes(val) || card.dataset.category.includes(val)){
      card.style.opacity='1';
      card.style.pointerEvents='auto';
      card.style.transform='translateY(0)';
    } else {
      card.style.opacity='0';
      card.style.pointerEvents='none';
      card.style.transform='translateY(20px)';
    }
  });
}

// Modal
function openModal(med){
  document.getElementById('modalName').textContent=med.nome_comercial;
  document.getElementById('modalDesc').textContent=med.descricao;
  document.getElementById('modalImg').src=med.imagem;

  const dosList=document.getElementById('modalDosagens');
  dosList.innerHTML='';
  med.dosagens.forEach(d=>{
    const li=document.createElement('li');
    li.textContent=`${d.quantidade} - ${d.forma} - $${d.preco.toFixed(2)}`;
    dosList.appendChild(li);
  });

  const farmList=document.getElementById('modalFarmacias');
  farmList.innerHTML='';
  med.farmacias.forEach(f=>{
    const li=document.createElement('li');
    li.textContent=`${f.nome} - $${f.preco.toFixed(2)}`;
    farmList.appendChild(li);
  });

  document.getElementById('medModal').style.display='flex';
}
function closeModal(){ document.getElementById('medModal').style.display='none'; }

// Pesquisa
function searchMed(value){
  const query=value || document.getElementById('searchMed').value.toLowerCase();
  if(query && !history.includes(query)) history.push(query);
  displayCards(query);
}

// Sugestões e histórico
function showSuggestions(val){
  const suggestionsDiv=document.getElementById('suggestions');
  suggestionsDiv.innerHTML='';

  if(!val){
    displayCards(); // volta ao menu inicial
    return;
  }

  const value=val.toLowerCase();
  const matches=medicamentos.filter(m=>m.nome_comercial.toLowerCase().includes(value) || m.nome_generico.toLowerCase().includes(value) || m.categoria.toLowerCase().includes(value));

  // Sugestões únicas
  const uniqueSuggestions=[...new Set(matches.map(m=>m.nome_comercial).concat(matches.map(m=>m.categoria)))];
  uniqueSuggestions.forEach(s=>{
    const div=document.createElement('div');
    div.textContent=s;
    div.onclick=()=>{ document.getElementById('searchMed').value=s; searchMed(s); suggestionsDiv.innerHTML=''; };
    suggestionsDiv.appendChild(div);
  });

  // Histórico
  history.filter(h=>h.toLowerCase().includes(value)).forEach(h=>{
    const div=document.createElement('div');
    div.textContent=h+' (recente)';
    div.style.fontStyle='italic';
    div.onclick=()=>{ document.getElementById('searchMed').value=h; searchMed(h); suggestionsDiv.innerHTML=''; };
    suggestionsDiv.appendChild(div);
  });

  displayCards(value); // mostra os cards dinamicamente enquanto digita
}

// Inicializa
displayCards();
</script>

</body>
</html>
